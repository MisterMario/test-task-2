## Информация
Наименование: Динамика курса доллара США к русскому рублю<br />
Тип: веб-приложение.<br />
Фронденд: HTML, CSS, JS.<br />
Бэкенд: PHP.<br />

## Описание
Приложение позволяет получить график изменения курса доллара США в русских рублях за заданный период.<br />
Период за который будут выбираться данные задает пользователь.<br />
Данные о курсе валюты на конкретные даты извлекаются с сайта Центрального банка России.<br />
Все данные, запрашиваемые с сайта Центрбанка кэшируются на сервере и впоследствии берутся уже из кэша.<br />

Описание кэша:
- формат хранимых данных: JSON;
- файл: cache.json.

По умолчанию все запросы к серверу сохраняются лог (/php/log.txt).<br />
В лог записывается:
- когда был выполнен запрос (mm:hh dd:mm:YYYY);
- период за который запрошены данные;
- откуда были получены данные: кэш или сервер ЦБР.
<br />
Для построения графика на клиенте используется библиотека: Chart.js<br />

## Установка и использование
Условия:
- PHP 5.5+

Для того, чтобы использовать приложение, достаточно загрузить файлы проекта на сервер.<br />
После чего обратиться к индексной странице "index.html", заполнить поля:
- начало периода;
- конец периода;

и нажать кнопку "Сформировать график".

## Некоторые моменты реализации
В реализации есть один момент, который на первый взгляд может показаться неправильным. И он заключается в работе метода getDataFromRemote(). Для справки: метод получает данные о курсе с сайта ЦБР. А собственно в чем может быть загвоздка: в тот момент, когда пользователь запрашивает данные, к примеру, с 05.05.2019 по 06.06.2019 данные извлекаются за не за заданный период, а с некоторым смещением с 01.05.2019 по 30.06.2019. Но пользователю возвращаются только запрошенные данные.<br />
Возникает вопрос: "Зачем нужны данные за периоды [01.05.2019:04.05.2019] и [07.06.2019:30.06.2019]?".<br />
И ответ на этот вопрос кроется в логике работы кэша.<br />
Дело в том, что сайт ЦБР (центрального банка России) содержит данные о курсе не за все даты. Как правило там пробелы в данных за воскресенье и понедельник. Но на этом все не заканчивается: нередко не хватает данных и за другие дни.<br />
В результате: невозможно определить содержит ли кэш полную информацию за месяц кэш, проверяя есть ли в нем информация за каждый день.
Так как сам сайт ЦБР имеет пробелы в данных.<br />
По этой причине приходится кэшировать данные сразу по месяцам, чтобы в последствии можно было сказать: кэш содержит исчерпывающую информацию за этот период. При этом в кэше будет проверяться информация не за конкретные даты, а за целые месяцы.<br />
Например, запросили данные c 01.05.2019 по 05.06.2019. Произошла проверка - в кэше есть данные за 05 и 06 месяц - есть. - Берем данные из кэша. Нет хоть за один из месяцев - берем с сайта.<br /><br />

И еще один момент: "Почему, если в кэше не хватает данных всего за 20% (это пример) периода - происходит запрос данных с сайта абсолютно за весь период?".<br />
Ответ:
По той причине, что в эти 20% могут попадать разные месяцы. К примеру: запрошены данные за период [05.01.2018:04.04.2019]. Оказалось, что не хватает данных за периоды [01.07.2018:31.07.2018] и [01.10.2018:30.10.2018], за все остальные периоды данные есть. В итоге: нужно запросить недостающие данные с сайта ЦБР, причем, сайт ЦБР может дать данные только за один период одновременно. Исходя из этого - нужно делать 2 запроса, или же 1 - в котором будут запрошены абсолютно все нужные данные.<br />
Так как запрос будет происходить к удаленному ресурсу, то это ожидание ответа займет значимое число времени. И чем больше запросов, тем больше времени займет ожидание ответа. По этой причине лучше извлечь лишние даныне, но при этом сделать один запрос. Все равно ответ от одного запроса будет обработан быстрее, чем получать ответы на несколько запросов и потом их обрабатывать.
